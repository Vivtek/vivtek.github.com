<html>
<head>
<title>Keyword tower_defense</title>
<style>p, li, td {
font-family: arial, sans-serif;
}
p.smtitle {
margin-left:0px;background-color:#eeeeee;font-weight:bold;
}
.sidemenu p {
font-size:small;
margin-top:0px;
margin-bottom:2px;
margin-left:10px;
}
.title {
font-family: arial, sans-serif;
font-weight: bold;
font-size:x-large;
color:black;
background-color:#eeeeee;
}
.subtitle {
font-family: arial, sans-serif;
font-size:small;
}
.t2 {
font-family: arial, sans-serif;
font-weight: bold;
font-size:large;
color:black;
background-color:#eeeeee;
}
.st2 {
font-family: arial, sans-serif;
font-size:x-small;
}
.border {
border: 1px solid #336600;
}
.content {
}
pre.code {
  margin: .5em 1em;
  padding: 0.5em;
  border: 1px dashed #94bd8d;
  color: Black;
  background-color: #eff7ef;
  overflow: auto;
}
</style>
</head>
<body>
<table width="100%">
<tr>
<td valign="top" width="150px"><div class="sidebar">
<div class="border">
<div class="sidemenu">
<p class="smtitle">vivtek</p>
<p>[ <a href=/>home</a> ]</p>
<p>[ <a href=/blog/>blog</a> ]</p>
<p>[ <a href=/recent.html>recent</a> ]</p>
<p>[ <a href=/fiction/>fiction</a> ]</p>
<p>[ <a href=/toonbots/>toonbots</a> ]</p>
<p>[ <a href=/wftk/>workflow</a> ]</p>
<p>[ <a href=/projects/>programming</a> ]</p>
<p>[ <a href=/services.html>translation</a> ]</p>
<p>[ <a href=http://semantic-programming.blogspot.com/>semprog&nbsp;blog</a> ]</p>
<p>[ <a href=/contact.html>contact</a> ]</p>
</div>

<div class="sidemenu">
<p class="smtitle">blog</p>
<p>[ <a href="keywords.html">keywords</a> ]</p>
<p class="smtitle">blogger</p>
<p>[ <a href="http://semantic-programming.blogspot.com/">semprog</a> ]</p>
<p>[ <a href="http://startup-ideas.blogspot.com/">startups</a> ]</p>
<p>[ <a href="http://orgaprop.blogspot.hu/">politics</a> ]</p>
</div>

<hr />
<script type="text/javascript"><!--
google_ad_client = "pub-7508846022405297";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<a href="/blog/t/ah_google_adsense_we_hardly_knew_ye!.html">Where
did my Google go?</a>

</div>

</div>
</td>
<td valign="top"><div class="content">

<div class="title">Keyword tower_defense</div>
<div class="st2"></div>
<hr>
<table>
<tr>
<td><div class="title"><a href="tower_defense_game_notion.html">Tower defense game notion</a></div>
<div class="st2">2007-08-05 <a href="keyword_tower_defense.html">tower_defense</a> <a href="keyword_evolutionary_programming.html">evolutionary_programming</a> <a href="keyword_project.html">project</a></div><br>
So I have gotten sucked into this cool game,
<a href="http://www.handdrawngames.com/DesktopTD/game.asp">Tower Defense</a> -- apparently
there's a whole genre, but this is the one I've been playing with the past
couple of days.
</p><p>
It's a Flash game, and the premise is simple.  You have a grid with two
incoming gates and two outgoing gates.  Enemies come in the incoming gates,
and you have to kill them before they get to the outgoing gates.  You lose
one health point for every enemty that gets through.  You have 20 health
points and no way to get more.
</p><p>
So -- the point of the game is to build defense towers which run automatically.
Each enemy you kill nets you a small amount of money, which you can use to
build new towers, or upgrade existing ones.  (You need to upgrade to keep up
with the steadily increasing toughness of the enemies, of course.)
</p><p>
It's fun.  I thought of a fun way to do some really cool programming with it.
AutoHotKey can find the Flash window, and can scan the screen for whatever
you need.  It can click things, too.  So  my notion is to write an AHK
front-end to play the game, with an IP connection to a strategy server.  The
strategy server would then use evolutionary programming to come up with 
board arrangements, and over time (perhaps a great deal of time, who knows?)
you could watch the strategizer get <i>really good</i> at Tower Defense.
</p><p>
Or not.
</p><p>
But it would be fun to try it.
</p><p>
My notion is that the instructions for a given strategy would consist of a
series of builds at given coordinates, intermixed with upgrades to the towers
built.  Each instruction would only execute after there was enough money
available for it.  So you'd have a string of instructions which would express
a given board setup.
</p><p>
To combine strategies, you'd just ... well, I guess you'd just cross the
streams, so to speak, taking two (or more?) successful strategies, cut them
at a random spot, and splice them together.  You might want to have some
cleanup rules (you can't upgrade squirter #3 if you didn't build three
squirters, for instance.)
</p><p>
And then you'd let it run for a few weeks.  You could get other people to
download your script and run strategies, too.
</p><p>
It could be very, very cool...
</p><p>
</p><p>
</p><p>
<br>
</td>
</tr>
<tr>
<td><div class="title"><a href="tower_defense_automation.html">Tower Defense automation</a></div>
<div class="st2">2007-08-10 <a href="keyword_evolutionary_programming.html">evolutionary_programming</a> <a href="keyword_tower_defense.html">tower_defense</a></div><br>
So it turns out that AutoHotKey can indeed play Tower Defense; I recorded a
script to set up my favorite opening last night.  It occurs to me that it
would be quite easy to set up a simple "strategy-description language" which
would be a series of commands to be executed in order.  Translating that
higher-level language into an AHK script would be trivial.
</p><p>
So at least it would be possible to track strategies and compare them.  That's
step one in an evolutionary approach.
</p><p>
Couple that with a Python front-end to make it all more convenient, and
we're off to the races!
</p><p>
</p><p>
</p><p>
<br>
</td>
</tr>
<tr>
<td><div class="title"><a href="ocr_in_python.html">OCR in Python</a></div>
<div class="st2">2007-08-16 <a href="keyword_tower_defense.html">tower_defense</a> <a href="keyword_evolutionary_programming.html">evolutionary_programming</a> <a href="keyword_ocr.html">ocr</a> <a href="keyword_python.html">python</a> <a href="keyword_pil.html">pil</a></div><br>
OCR in Python.  There isn't any, to speak of.  While there do exist a few
open-source OCR projects (Conjecture seems to have a great deal of promise!),
none of them play well with Python.  I may want to rectify that at some point.
</p><p>
Anyway, growing bored of simply writing AutoHotKey scripts to play Tower
Defense, I quickly realized that I really needed a tool to start the game
for me, and track the score and other stats for later analysis.
</p><p>
The first part was no big deal; I whipped out a PyPop applet that could launch
a URL.  Since I wanted a window that was sized according to the Flash object,
that required putting together a local HTML file that could run some JavaScript
to pop up the window I wanted, then close itself afterwards.  I'll document
that <i>when I have time</i> (I propose the abbreviation wIht to save my time
typing that phrase.)
</p><p>
Well.  That was fun, and it worked, but I really wanted something to monitor
the score for me, and timing, and ... stuff.  Which meant that I would have
to read the actual graphical screen, because there's no handy-dandy textual
output on that Flash app.
</p><p>
You'd think that would be trivial in 2007.  But you'd be wrong.
</p><p>
Getting a snapshot of the screen was easy enough.  I wrapped win32gui to get
a window handle by the title (I'll document this later: Idtl), then installed
PIL to grab the actual graphical data and manipulate it.  To warm up with that,
I set a timer to grab a four-pixel chunk of the screen so I could see whether
the Flash had started or not (Tower Defense goes through an ad screen, then
a splash screen, and only then does the game start.)  That took a little
putzing around, but the result was gratifying: my little utility could tell me
when the game was ready to play.  As long as the window was on my primary
monitor, anyway (turns out PIL is not good with multiple monitors -- who knew?)
So it turned out I had to move the window before all that.
</p><p>
And then I could grab the sections of the screen with the numbers on them
for score, bonus, lives, timer, and money... And then it all screeched to a
halt, because there are no open-source Python OCR libraries.  At all.  And
clearly I don't have the time to adapt something -- hell, I don't even have
time to do all this.  I don't even have time to <i>write this blog entry</i>.
</p><p>
So of course I did the natural thing.  I wrote my own special-purpose OCR,
because clearly that would be saving time.  I saved four hours before I started
falling asleep, and it still can't tell 8 from 0 (but it does a fine job on the
rest of the digits.)  It was a lot of fun, actually.  Idtl.
</p><p>
So.  Proposal.  It would be nice to work some with Conjecture, and produce
the following: (1) a Python binding that can work in memory with PIL bitmaps,
(2) a Web submitter for test graphics, and (3) an online tester and test
database reporter.  That would be really cool.  Of course, only wIht.
</p><p>
</p><p>
<br>
</td>
</tr>
</table>

</div></td></td></table>

<br><br><br><br>
    <center><img src="/images/black.gif" height=1 width=300><br>
    <Font Size="-1"><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</Font>
</center>


</body>
</html>
