<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
   <TITLE>xqmf -- Overview documentation</TITLE>
</head>

<body bgcolor="#FFFFFF" link="#000099" vlink="#990000" alink="990000">
<table width="100%">
<tr>
<td valign="top" width="150px"><div class="sidebar">
<div class="border">
<div class="sidemenu">
<p class="smtitle">vivtek</p>
<p>[ <a href=/>home</a> ]</p>
<p>[ <a href=/blog/>blog</a> ]</p>
<p>[ <a href=/wiki_index.html>recent</a> ]</p>
<p>[ <a href=/fiction/>fiction</a> ]</p>
<p>[ <a href=/toonbots/>toonbots</a> ]</p>
<p>[ <a href=/toon-o-matic/>toon-o-matic</a> ]</p>
<p>[ <a href=/wftk/>workflow</a> ]</p>
<p>[ <a href=/projects/>programming</a> ]</p>
<p>[ <a href=/services.html>translation</a> ]</p>
<p>[ <a href=http://semantic-programming.blogspot.com/>semprog&nbsp;blog</a> ]</p>
<p>[ <a href=http://big-old-house.blogspot.com/>house</a> ]</p>
<p>[ <a href=http://xlat-perl.blogspot.com/>xlat&nbsp;project</a> ]</p>
<p>[ <a href=/contact.html>contact</a> ]</p>
</div>

<hr />
<div class="sidemenu">
<p class="smtitle">content</p>
<p>[ <a href=/wiki?action=edit&page=(unresolved tag url)>edit</a> ]</p>
<p>[ <a href=/wiki?action=new&from=(unresolved tag url)>new</a> ]</p>
</div>

<hr />
<script type="text/javascript"><!--
google_ad_client = "pub-7508846022405297";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<a href="/blog/t/ah_google_adsense_we_hardly_knew_ye!.html">Where
did my Google go?</a>

</div>

</div>
</td>
<td valign="top"><div class="content">


<center><table><tr><td>
<h2>Topic: <u>xqmf</u> -- Overview</h2>
[&nbsp;<a href=index.html>project&nbsp;home</a>&nbsp;]
[&nbsp;<a href=http://www.vivtek.com/xqmf/discuss.pl>discussion</a>&nbsp;]
</td></tr>

<tr><td>
Here's a list of basic topics you can read about here.  I'm open to suggestions as to
how better to organize this page.
<ul>
<li><a href="#data">The data we're looking at</a>
<li><a href="#analyzers">Analyzers: code which discovers data</a>
<li><a href="#repository">The analyzer repository</a>
</ul>

There are some other topics of interest as well, but they're on their own pages:<ul>
<li><a href="schema.html">Working with a database</a>
<li><a href="framework.html">Implementation of the framework</a>
</ul>
</td></tr>

<tr><td>
<br><br>
<a name="data">
<u><font size=+1><i><strong>Data universe</strong></i></font>, or, what are we actually looking at in this project?<br></u>
We're dealing with three datasources here, really:<ul>
<li><strong>The project being measured</strong><br>
The project is assumed to be either a set of files in a local directory,
or a CVS project (meaning that it's still a set of files in a local
directory; I'm not out for more work).
<li><strong>The description of the project generated by the framework</strong><br>
This description consists of a number of <i>entities</i> which have
been discovered by applying <i>parsers</i> to other entities.  The base
entities are the files of which the project is composed; each file is
automatically an entity.  Interesting entities will be things like
function and variable declarations, uses of functions and variables,
and so on.
<li><strong>Test results</strong><br>
Test results are the result of metrics applied to descriptive entities.
Each result is produced by a <i>metric</i>, which is a bit of code,
usually in Perl.  Results may be descriptive or prescriptive.
A <i>descriptive</i> test result is simply a number or category, for
instance, the number of lines of code in a file is descriptive of the
file.  A <i>prescriptive</i> result is the result of a comparision of
the actual state of the project with some goal or range; if we have set
a goal of having small files so that large files might be broken up
into more manageable chunks, then a prescriptive result might be a
warning that a file has grown too large.  The goals set for a project
will probably be a mixture of default goals and custom goals.  It
should be simple to set up local goals as prescriptive metrics.
</ul>

Most of the data resides in those entity descriptions.  As it turned out, the
easiest way to implement this was to create a storage directory and place one XML
file into that for each watched file in the project.  The top entity in that file
is the file itself; any entity may contain subentities and results.
<p>
If you want database access, then you can scan those entity files and place things
into a database as a <i>secondary</i> datasource, for easier reporting.  This is the
approach that I've implemented -- if you don't want database access, no big deal, but
if you do, you simply mark the project with a DBI access identifier and each file
will update the database whenever it changes.  <a href="schema.html">Here's the
database schema</a> and <a href="xqmf_mdb.zip">here is a convenient Access 97 database</a>,
already set up, which I'm using during testing.  If you're a Windows kind of person, then
you can open that up to get an idea of what's going on.
<p>
So in all this, we have the following data thingies, corresponding to
the database schema:<ul>
<li><strong>Project</strong><br>
The project is the central defining key of all this.  Entities belong
to projects, test results apply to projects, and so on.  The project is
defined by a project file in XML format.  (I'm really getting more into
XML.)  While the default initialization script assumes that only files from
the local directory belong to the project (a la CVS) there is no requirement
for this to be the case -- you can include anything from the local filesystem.
You do this by manual editing of the XML project file at the moment.
<p>
A project also has a <i>storage directory</i>, and this must also be in the
local filesystem.  Each watched file in the project will maintain a result file
in the storage directory.
<p>
<li><strong>File</strong><br>
Files are files.  Each file has a base language which determines the
top-level parser to be used to start analysing it.  This means that
the language is really treated as an entity, so that a "file-c" is a
different kind of entity from a "file-perl", even though both are files.
The initialization script will make initial guesses as to file types, but
ultimately you'll want to set them by hand.  Analyzers are queued on files
by looking at their types; the type is broken by dash, so that an analyzer
(like the LOC metric) can apply to type "file" and thus be triggered for
C files and Perl files alike, but a C parser will trigger on "file-c", and
special header metrics might use a type of "file-c-header" or something.
<p>
<li><strong>Entity</strong><br>
The entities defined by a project are ultimately what the project is
about.  Entities can be anything, as long as they can be discovered
automatically by parsers from files belonging to the project.  Each
entity is of a particular <i>type</i>.  Its type determines what parsers
should be invoked in order to analyse it further.  Each entity belongs
to a particular project, is in a particular file, and has a particular
location in that file (by byte offset, line/column position, and length
of text extent.)
<p>
The thing about entities is that they're hierarchical.  An entity (and
indeed the top-level files are themselves entities) may contain any number
of subentities.  Moreover, I think that we'll want to encode relationships
between entities in some way (although I still don't know how yet.)
<p>
<li><strong>Result</strong><br>
Finally, results have been described pretty well already.  Results
are a dandy candidate for stashing into a database for reporting.
Prescriptive entities will be
grouped into a "to-do list" for the project and ranked according to
urgency.  I'll include a link to ArgoUML and its critics as soon as I
get around to finding it.  Jason, is there a body of literature about
critics?
</ul>
<p>
<a name="analyzers">
<u><font size=+1><i><strong>Analyzers</strong></i></font></u><br>
Analyzers are what do the work.  An analyzer is called on an entity and can
do either or both of two things: it can parse the entity and discover subentities,
or it can make measurements of the entity, which are metric results.
In practice I think that the two functions will mostly be performed by
separate analyzers, but I guess time will tell on that issue.
<p>
At any rate, the analyzer is a snippet of Perl code.  There will also be
provision for external programs which are called via a system call, but
most metrics, anyway, are going to be very simple, so Perl will do nicely.
<p>
Relationships between entities also need to be discovered; I'm not sure
yet what that's going to look like, but I'm hoping it'll be obvious once
I start actually writing some more complicated analyzers than LOC.
<p>
<a name="repository">
<u><font size=+1><i><strong>The repository</strong></i></font></u><br>
Each installation of XQMF will have a local analyzer repository.  This will
contain a series of XML files which define the analyzers.  An example is
the LOC analyzer; note that the Perl code is just stuck right into the XML,
isn't that cool?
<p>
The ideal here is to have remote repositories which collect and define various
analysis tools.  Then you could just bop right over to one and download any
set of metrics you need for a new project.  As this takes shape, I'll try to
document it more closely here.  But if you've ever used ActiveState's PPM to
install Perl packages on Windows, you'll know that automating this kind of
configuration task is very, very useful.
</td></tr>

</table>


</div></td></td></table>

<br><br><br><br>
    <center><img src="/images/black.gif" height=1 width=300><br>
    <Font Size="-1"><A HREF="/disclaimer.html">Copyright</A> &copy; 1996-2009 Vivtek. All Rights Reserved.  <a href=/disclaimer.html>Read the disclaimer.</a></font>
    <BR>
    <font size="-1"><a href="/privacy.html">Read our privacy statement, too, if you are concerned.</a></font>
    <Br>
    Problems?  Try <A HREF="/webmaster.html">webmaster@vivtek.com</A> or our
                   <A href="/answers.html">answer page</A>.</Font>
<br><br>
<script type="text/javascript"><!--
google_ad_client = "pub-7508846022405297";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "text";
google_ad_channel = "";
google_color_border = "CCCCCC";
google_color_bg = "CCCCCC";
google_color_link = "000000";
google_color_text = "333333";
google_color_url = "666666";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>


</body>
</html>
